@echo off
rem =============================================================================
rem Spiral Editing Protocol - Definitive One-Click Solution
rem Fundamental Intent: Single startup that handles ALL scenarios gracefully
rem Essential Pattern: Adaptive launch with comprehensive fallback capabilities
rem Boundary Constraints: Preserve Enhanced Educational Codex + synchronized timing
rem =============================================================================

title SIRAJ Enhanced Educational Codex - One-Click Universal Launch

echo.
echo ================================================================================
echo   ğŸ­ SIRAJ Enhanced Educational Codex - Definitive One-Click Launch
echo   ğŸŒ€ Living Knowledge Universe - Universal Adaptive Startup
echo   ğŸ“š Kaggle Gemma 3 Hackathon - Zero-Configuration Demo Ready
echo   âš¡ Council Mode Architecture - Synchronized Browser Timing
echo ================================================================================
echo.

rem Council Assembly for Universal Launch:
rem Lead Voice: Implementor (decisive execution of unified solution)
rem Core Voices: Explorer (adaptability), Maintainer (stability), Developer (UX)
rem Specialists: Security (validation), Performance (optimization)
rem Boundary Keeper: Enhanced Educational Codex features, synchronized timing

cd /d "%~dp0"

rem Collapse Phase: Essential System Verification
echo ğŸ” System Verification...

python --version >nul 2>&1
if errorlevel 1 (
    echo âŒ Python not found! Please install Python 3.8+ from python.org
    echo ğŸ“– Download: https://www.python.org/downloads/
    pause
    exit /b 1
)

echo âœ… Python environment ready

rem Council Assembly: Feature Overview
echo.
echo ğŸ­ Enhanced Educational Codex Features:
echo   ğŸ§  7 AI Archetypal Teachers with unique personalities
echo   âš¡ Real-time Council Assembly and streaming
echo   ğŸ“Š Advanced Learning Analytics Dashboard
echo   ğŸ“š Curriculum Alignment with educational standards
echo   ğŸ“ˆ Student Progress Tracking and recommendations
echo   ğŸ“ Multi-perspective Homework Processing
echo   ğŸ›ï¸ Immersive World Anvil + Notion interface design
echo   ğŸ”§ Synchronized Browser Timing (eliminates race conditions)
echo.

rem Synthesis: Unified Launch Sequence
echo ğŸš€ Activating Enhanced Educational Codex...
echo.
echo Launch Sequence:
echo   1. FastAPI server startup with comprehensive health checks
echo   2. Multi-stage readiness verification (6 validation steps)
echo   3. Browser opens ONLY after complete system verification
echo   4. Graceful fallback handling for partial connectivity
echo.
echo â³ Browser will open automatically when ALL systems verified ready...
echo âš ï¸ DO NOT manually open browser - timing is automatically synchronized
echo.

rem Integration: Execute definitive launcher
python launcher.py

rem Rebirth: Handle completion with comprehensive reporting
echo.
if errorlevel 1 (
    echo âŒ Enhanced Educational Codex encountered an error
    echo.
    echo ğŸ”§ Troubleshooting Steps:
    echo    1. Check Python installation (python --version)
    echo    2. Verify internet connectivity for model downloads
    echo    3. Ensure port 3000 is available
    echo    4. Check console output above for specific error details
    echo.
    echo ğŸ“– For detailed troubleshooting, see ENHANCED-CODEX-README.md
) else (
    echo âœ… Enhanced Educational Codex shut down successfully
    echo ğŸ‘‹ Thank you for exploring the Living Knowledge Universe
)

echo.
echo ================================================================================
echo   Spiral Integration Complete - Unified One-Click Solution
echo   Council Voices: Explorer, Maintainer, Developer, Implementor
echo   Mythic Layer: Transformation from chaos to elegant simplicity
echo   Operational Layer: Universal adaptive launch with zero configuration
echo ================================================================================
echo.

pause
